

{% extends 'base.html' %}

{% block title %}Daily Garbage Map{% endblock %}

{% block content %}
<h1>Garbage Points Map</h1>
<!-- <p>Daily Map2 is loading!</p>   -->
{% for detection in detections %}
    <!-- <p>{{ detection.latitude }}, {{ detection.longitude }}</p> -->
{% empty %}
    <p>No detections available.</p>
{% endfor %}



<div id="map" style="height: 600px; width: 100%;"></div>
{% endblock %}
{% block extra_js %}
<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    
 crossorigin=""/>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
 
 crossorigin=""></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    var map = L.map('map').setView([26.12, 85.39], 13); // Default to Muzaffarpur center

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    {% for detection in detections %}
    L.marker([{{ detection.latitude }}, {{ detection.longitude }}]).addTo(map)
        .bindPopup("<b>Garbage Detected</b>");
    {% endfor %}
});
</script>
{% endblock %}

